<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KANTINKU — Pesan Makanan Kantin Sekolah</title>
  <meta name="description" content="KANTINKU - Sistem pemesanan makanan kantin untuk siswa dan penjual. Prototype HTML/CSS/JS." />
  <style>
    /* ====== RESET ====== */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body,#app{height:100%}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:linear-gradient(180deg,#f6fbff,#f8fff4);color:#12202b}

    /* ====== LAYOUT ====== */
    .container{max-width:1100px;margin:28px auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}

    /* ====== LOGO (KANTINKU) ====== */
   .logo-mark {
  width: 68px;            /* ukuran kotak logo */
  height: 68px;
  object-fit: contain;    /* biar logo nggak gepeng */
  border-radius: 12px;    /* kalau mau rounded */
  box-shadow: 0 6px 18px rgba(0,0,0,0.15); /* efek bayangan */
}


    /* ====== TOP ACTIONS ====== */
    .actions{display:flex;gap:10px;align-items:center}
    .btn{background:#12202b;color:white;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;color:#12202b;border:1px solid rgba(17,24,39,0.08)}

    /* ====== MAIN ====== */
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
    .card{background:white;border-radius:14px;padding:18px;box-shadow:0 8px 30px rgba(16,24,40,0.06)}

    /* ====== CANTEEN SELECT ====== */
    .canteens{display:flex;gap:12px;margin-bottom:12px}
    .canteen{padding:10px 12px;border-radius:12px;cursor:pointer;font-weight:600}
    .canteen.active{background:linear-gradient(90deg,#fff1b8,#ffd6a5);box-shadow:0 8px 18px rgba(255,186,87,0.12)}

    /* ====== MENU LIST ====== */
    .menu-list{display:flex;flex-direction:column;gap:12px}
    .menu-item{display:flex;align-items:flex-start;gap:12px;padding:12px;border-radius:10px;border:1px solid rgba(17,24,39,0.04)}
    .menu-item img{width:84px;height:84px;border-radius:8px;object-fit:cover}
    .menu-info{flex:1}
    .menu-info h3{font-size:16px;margin-bottom:6px}
    .menu-info p{font-size:13px;color:rgba(17,24,39,0.6);margin-bottom:8px}
    .menu-meta{display:flex;align-items:center;gap:8px}
    .price{font-weight:700}

    /* ====== QUANTITY & NOTE ====== */
    .qty{display:flex;align-items:center;gap:6px}
    .qty button{width:30px;height:30px;border-radius:8px;border:1px solid rgba(17,24,39,0.06);background:transparent;cursor:pointer}
    .qty input[type=number]{width:56px;padding:6px;border-radius:8px;border:1px solid rgba(17,24,39,0.06);text-align:center}
    .note{width:100%;padding:8px;border-radius:8px;border:1px dashed rgba(17,24,39,0.06);font-size:13px}

    /* ====== CART ====== */
    .cart-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
    .cart-list{display:flex;flex-direction:column;gap:10px;max-height:420px;overflow:auto;padding-right:6px}
    .cart-row{display:flex;align-items:center;gap:8px;background:#fbfbff;padding:10px;border-radius:10px}
    .cart-row .meta{flex:1}
    .cart-row .meta h4{font-size:14px}
    .cart-total{display:flex;align-items:center;justify-content:space-between;padding-top:12px;border-top:1px dashed rgba(17,24,39,0.06);margin-top:10px}

    .small{font-size:12px;color:rgba(17,24,39,0.6)}

    /* ====== FOOTER ACTIONS ====== */
    .checkout-area{display:flex;flex-direction:column;gap:8px}
    .checkout-area .btn{width:100%}
    .empty{display:grid;place-items:center;padding:40px;color:rgba(17,24,39,0.5)}

    /* ====== PAYMENT PAGE (MODAL-LIKE) ====== */
    .overlay{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:none;place-items:center;padding:20px}
    .overlay.show{display:grid}
    .pay-modal{width:680px;max-width:100%;background:white;padding:20px;border-radius:12px}
    .pay-grid{display:grid;grid-template-columns:1fr 260px;gap:18px}
    .qris{display:grid;place-items:center;padding:12px;border-radius:8px;border:1px solid rgba(17,24,39,0.06)}

    /* ====== QRIS REPLICA ====== */
    .qris-canvas{width:220px;height:220px;background:linear-gradient(180deg,#fff,#f6f7fb);padding:12px;border-radius:8px;border:6px solid #0b1220;display:grid;place-items:center}
    /* a simple stylized QR-like grid */
    .qris-grid{width:180px;height:180px;display:grid;grid-template-columns:repeat(9,1fr);grid-template-rows:repeat(9,1fr);gap:3px}
    .qris-grid .cell{background:#0b1220}
    .qris-info{font-size:13px}

    /* ====== RESPONSIVE ====== */
    @media (max-width:980px){
      .grid{grid-template-columns:1fr}
      .logo-text h1{font-size:18px}
      .qris{display:block}
    }

    /* little utility */
    .muted{color:rgba(17,24,39,0.5)}
    .chip{padding:6px 8px;border-radius:8px;background:#f3f4f6;font-weight:600}
    /* ====== ANIMATIONS ====== */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.3); }
}

@keyframes zoomIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ====== APPLY ANIMATIONS ====== */

/* Background body dengan animasi */
body {
  background: linear-gradient(270deg, #f6fbff, #f8fff4, #ffeaea);
  background-size: 600% 600%;
  animation: gradientMove 20s ease infinite;
}

/* Menu item masuk dengan animasi */
.menu-item {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: fadeInUp 0.5s ease both;
}
.menu-item:hover {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 0 12px 24px rgba(0,0,0,0.08);
}

/* Tombol hover */
.btn {
  transition: all 0.25s ease;
}
.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}

/* Cart bounce ketika update */
#cart-count.updated {
  animation: bounce 0.4s;
}

/* Overlay animasi muncul */
.overlay.show .pay-modal {
  animation: zoomIn 0.4s ease;
}
/* ====== FIX MOBILE TAMBAHAN ====== */
  @media (max-width: 480px) {
    .menu-item img { width: 60px; height: 60px; }
    .note { font-size: 12px; }
    .actions { flex-direction: column; gap: 6px; }
  }

  h3 {
    font-size: clamp(14px, 4vw, 18px);
  }

  body {
    overflow-x: hidden;
  }
/* ====== FIX MODAL DI MOBILE ====== */
@media (max-width: 768px) {
  .pay-modal {
    width: 95%;           /* biar nggak kepotong sisi kiri-kanan */
    max-height: 90vh;     /* maksimal tinggi layar */
    overflow-y: auto;     /* kalau kontennya kepanjangan bisa discroll */
  }
  .pay-grid {
    grid-template-columns: 1fr; /* stack jadi 1 kolom */
    gap: 12px;                  /* jarak antar bagian */
  }
  .qris {
    margin-top: 12px; /* kasih jarak kalau ditumpuk */
  }
}
  </style>
</head>
<body>
  <div id="app" class="container">
    <header>
      <div class="logo">
  <img src="images/logo-kantinku.png" alt="Logo Kantinku" class="logo-mark">
  <div class="logo-text">
    <h1>KANTINKU</h1>
    <p class="small">Pesan, Bayar, Ambil — Praktis untuk siswa & penjual</p>
  </div>
</div>


      <div class="actions">
        <button class="btn ghost" id="btn-clear">Kosongkan Keranjang</button>
        <button class="btn" id="btn-view-orders">Lihat Pesanan</button>
      </div>
    </header>

    <main class="grid">
      <section class="card">
        <div class="canteens" id="canteen-list">
          <!-- canteens injected -->
        </div>

        <div class="menu-list card" id="menu-list" aria-live="polite">
          <!-- menu injected -->
        </div>
      </section>

      <aside class="card">
        <div class="cart-header">
          <div>
            <h3>Keranjang</h3>
            <p class="small">Item yang akan dipesan</p>
          </div>
          <div class="chip" id="cart-count">0</div>
        </div>

        <div class="cart-list" id="cart-list">
          <div class="empty" id="cart-empty">Keranjang kosong. Tambahkan menu dari sebelah kiri.</div>
        </div>

        <div class="cart-total">
          <div>
            <div class="small">Subtotal</div>
            <div id="cart-subtotal">Rp 0</div>
          </div>
        </div>

        <div style="margin-top:12px" class="checkout-area">
          <button class="btn" id="btn-checkout">Lanjut ke Pembayaran</button>
          <button class="btn ghost" id="btn-save">Simpan Pesanan Sementara</button>
        </div>
      </aside>
    </main>
  </div>

  <!-- PAY OVERLAY -->
  <div class="overlay" id="overlay">
    <div class="pay-modal">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3>Pembayaran — QRIS</h3>
        <button class="btn ghost" id="close-overlay">Tutup</button>
      </div>

      <div class="pay-grid">
        <div>
          <h4>Ringkasan Pesanan</h4>
          <div id="summary-list" style="margin-top:10px;display:flex;flex-direction:column;gap:8px;max-height:360px;overflow:auto;padding-right:8px"></div>
          <div style="margin-top:12px;border-top:1px dashed rgba(17,24,39,0.06);padding-top:10px">
            <div class="small">Total</div>
            <div id="summary-total" style="font-weight:800;font-size:18px">Rp 0</div>
          </div>
        </div>

        <div>
          <div class="qris">
            <div class="qris-canvas" role="img" aria-label="QRIS placeholder">
              <div class="qris-grid" id="qris-grid"></div>
            </div>
            <div style="margin-top:10px;text-align:center" class="qris-info">
              <div class="small muted">Scan menggunakan aplikasi pembayaran</div>
              <div style="margin-top:8px"><button class="btn" id="btn-copy">Salin Nomor</button></div>
            </div>
          </div>

          <div style="margin-top:12px">
            <div class="small muted">Status Pembayaran:</div>
            <div style="margin-top:8px;display:flex;gap:8px">
              <button class="btn ghost" id="btn-pending">Menunggu</button>
              <button class="btn" id="btn-confirm">Saya Sudah Bayar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== DATA ======
    const DATA = {
      canteens: [
        { id: 'santi', name: 'Warung Bu Santi', menus: [
          {id:'santi-1',name:'Mie Instant', price:7000, img:"https://i.pinimg.com/originals/b5/5f/b3/b55fb388c7aae505b4db8fa47f98d802.jpg"},
          {id:'santi-2',name:'Minuman', price:3000, img:"https://lalalaelatulm.wordpress.com/wp-content/uploads/2017/10/minuman-buah.jpg?w=435"},
          {id:'santi-3',name:'Gorengan', price:4000, img:"https://res.cloudinary.com/dk0z4ums3/image/upload/v1681960016/attached_image/jangan-lupa-diri-menikmati-gorengan.jpg"}
        ]},
        { id: 'tarno', name: 'Bakso Pak Tarno', menus: [
          {id:'tarno-1',name:'Mie Baso', price:15000, img:"https://assets-pergikuliner.com/UlI_aq4GzTvXEDFiBvysj4mfVp8=/fit-in/1366x768/smart/filters:no_upscale()/https://assets-pergikuliner.com/uploads/image/picture/1238056/picture-1548651674.JPG"},
          {id:'tarno-2',name:'Mie Ayam', price:14000, img:"https://karawangbekasi.disway.id/upload/997f5ba86d3282c0ff9be0ef27a34aa0.jpg"}
        ]},
        { id: 'desi', name: 'Aneka Jajanan Bu Desi', menus: [
          {id:'desi-1',name:'Gorengan', price:3500, img:"https://pict.sindonews.net/webp/480/pena/news/2025/03/19/156/1544755/10-kota-di-indonesia-dengan-konsumsi-gorengan-tertinggi-batang-posisi-pertama-hzr.webp"},
          {id:'desi-2',name:'Pisang Aroma', price:5000, img:"https://akcdn.detik.net.id/visual/2023/07/22/resep-pisang-aroma-mirip-jajanan-kaki-limafoto-pinterestcomfreepik_11.jpeg?w=480&q=90"},
          {id:'desi-3',name:'Dimsum', price:8000, img:"https://static.republika.co.id/uploads/member/images/news/oyl29f7hgf.jpg"}
        ]}
      ]
    };

    // ====== UTIL ======
    function rupiah(n){return 'Rp ' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.')}

    // ====== RENDER CANTEENS ======
    const canteenList = document.getElementById('canteen-list');
    const menuList = document.getElementById('menu-list');
    let activeCanteen = DATA.canteens[0].id;

    DATA.canteens.forEach(c => {
      const el = document.createElement('div');
      el.className = 'canteen' + (c.id===activeCanteen ? ' active' : '');
      el.textContent = c.name;
      el.tabIndex = 0;
      el.onclick = ()=>{setActiveCanteen(c.id)};
      canteenList.appendChild(el);
    });

    function setActiveCanteen(id){
      activeCanteen = id;
      Array.from(canteenList.children).forEach(ch=>ch.classList.toggle('active', ch.textContent === DATA.canteens.find(x=>x.id===id).name));
      renderMenu();
    }

    // ====== CART ======
    let CART = JSON.parse(localStorage.getItem('kantinku_cart')||'{}');
    function saveCart(){localStorage.setItem('kantinku_cart', JSON.stringify(CART));}

    function addToCart(item, qty, note){
      if(qty<=0) return;
      if(!CART[item.id]){
        CART[item.id]={...item,qty, note};
      } else {
        CART[item.id].qty += qty;
        if(note) CART[item.id].note = CART[item.id].note ? CART[item.id].note + ' | ' + note : note;
      }
      saveCart();
      renderCart();
    }

    function removeFromCart(id){
      delete CART[id];saveCart();renderCart();
    }

    function updateQty(id,qty){
      if(qty<=0) { removeFromCart(id); return; }
      CART[id].qty = qty; saveCart(); renderCart();
    }

    // ====== RENDER MENU ======
    function renderMenu(){
      menuList.innerHTML = '';
      const can = DATA.canteens.find(c=>c.id===activeCanteen);
      const title = document.createElement('div');
      title.style.marginBottom='8px';
      title.innerHTML = `<h2 style="margin-bottom:6px">${can.name}</h2><div class=\"small muted\">Pilih menu dan tambahkan catatan jika perlu</div>`;
      menuList.appendChild(title);

      can.menus.forEach(m => {
        const row = document.createElement('div');
        row.className = 'menu-item';
        row.innerHTML = `
          <img src="${m.img}" alt="${m.name} image" />
          <div class="menu-info">
            <h3>${m.name}</h3>
            <p class="small muted">Harga satuan: <span class="price">${rupiah(m.price)}</span></p>
            <div style="display:flex;align-items:center;gap:10px;margin-top:8px">
              <div class="qty">
                <button data-action="dec">-</button>
                <input type="number" min="0" value="1" data-id="${m.id}" />
                <button data-action="inc">+</button>
              </div>
              <div style="flex:1">
                <input placeholder="Catatan (mis. tidak pake sambal)" class="note" data-note-for="${m.id}" />
              </div>
              <div>
                <button class="btn" data-add="${m.id}">Tambah</button>
              </div>
            </div>
          </div>
        `;

        // attach qty handlers
        row.querySelectorAll('[data-action]').forEach(btn=>{
          btn.addEventListener('click', ()=>{
            const input = row.querySelector('input[type=number]');
            let val = parseInt(input.value||'0');
            if(btn.getAttribute('data-action')==='inc') val++;
            else val = Math.max(0,val-1);
            input.value = val;
          })
        })

        // add button
        row.querySelector('[data-add]').addEventListener('click', (e)=>{
          const id = e.currentTarget.getAttribute('data-add');
          const qty = parseInt(row.querySelector('input[type=number]').value||'0');
          const note = row.querySelector('.note').value.trim();
          addToCart({...m, id}, qty, note);
        });

        menuList.appendChild(row);
      });
    }

    // ====== RENDER CART ======
    const cartListEl = document.getElementById('cart-list');
    const cartCountEl = document.getElementById('cart-count');
    const cartSubtotalEl = document.getElementById('cart-subtotal');

    function renderCart(){
      const keys = Object.keys(CART);
      cartCountEl.textContent = keys.reduce((s,k)=>s+CART[k].qty,0);
      if(keys.length===0){ cartListEl.innerHTML = '<div class="empty">Keranjang kosong. Tambahkan menu dari sebelah kiri.</div>'; cartSubtotalEl.textContent = 'Rp 0'; return; }
      cartListEl.innerHTML = '';
      let subtotal = 0;
      keys.forEach(k=>{
        const it = CART[k];
        subtotal += it.price * it.qty;
        const row = document.createElement('div');
        row.className = 'cart-row';
        row.innerHTML = `
          <div style="width:10px"></div>
          <div class="meta">
            <h4>${it.name}</h4>
            <div class="small muted">${it.note ? it.note : ''}</div>
            <div style="margin-top:6px" class="small">${rupiah(it.price)} x <input type=number min=1 value=${it.qty} data-qty-id="${it.id}" style="width:60px;padding:4px;border-radius:6px;border:1px solid rgba(17,24,39,0.06);"> </div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:800">${rupiah(it.price*it.qty)}</div>
            <div style="margin-top:8px"><button class="btn ghost" data-remove="${it.id}">Hapus</button></div>
          </div>
        `;
        cartListEl.appendChild(row);
      });
      cartSubtotalEl.textContent = rupiah(subtotal);

      // attach cart handlers
      cartListEl.querySelectorAll('[data-remove]').forEach(b=>b.addEventListener('click', (e)=>removeFromCart(e.currentTarget.getAttribute('data-remove'))));
      cartListEl.querySelectorAll('[data-qty-id]').forEach(inp=>inp.addEventListener('change', (e)=>{
        const id = e.currentTarget.getAttribute('data-qty-id');
        const v = parseInt(e.currentTarget.value||'0');
        updateQty(id,v);
      }));
    }

    // ====== INIT ======
    renderMenu(); renderCart();

    // ====== BUTTONS ======
    document.getElementById('btn-clear').addEventListener('click', ()=>{
      if(confirm('Kosongkan seluruh keranjang?')){ CART={}; saveCart(); renderCart(); }
    });

    document.getElementById('btn-save').addEventListener('click', ()=>{
      alert('Pesanan disimpan sementara di browser Anda.');
    });

    document.getElementById('btn-checkout').addEventListener('click', ()=>{
      const keys = Object.keys(CART);
      if(keys.length===0){ alert('Keranjang kosong. Tambahkan menu dulu.'); return; }
      openOverlay();
    });

    // overlay
    const overlay = document.getElementById('overlay');
    document.getElementById('close-overlay').addEventListener('click', ()=> overlay.classList.remove('show'));

    function openOverlay(){
      overlay.classList.add('show');
      // render summary
      const summaryList = document.getElementById('summary-list');
      summaryList.innerHTML = '';
      let total=0;
      Object.keys(CART).forEach(k=>{
        const it = CART[k]; const row = document.createElement('div');
        row.style.display='flex';row.style.justifyContent='space-between';row.style.alignItems='center';
        row.innerHTML = `<div><strong>${it.name}</strong><div class='small muted'>${it.note?it.note:'-'}</div></div><div>${rupiah(it.price*it.qty)}</div>`;
        summaryList.appendChild(row);
        total += it.price*it.qty;
      });
      document.getElementById('summary-total').textContent = rupiah(total);

      // generate qris-like pattern
      const qgrid = document.getElementById('qris-grid');
      qgrid.innerHTML = '';
      const pattern = generateQRPattern();
      for(let i=0;i<81;i++){
        const c = document.createElement('div'); c.className='cell';
        // set some cells transparent for a pattern
        if(pattern[i]===0) c.style.background='transparent';
        qgrid.appendChild(c);
      }
    }

    function generateQRPattern(){
      // simple pseudo-random but deterministic pattern for demo
      const seed = Object.keys(CART).join('|').length || 7;
      const pattern = [];
      for(let i=0;i<81;i++){
        const v = Math.abs(Math.sin((i+seed)*13.37))*10;
        pattern.push((v%2)>1?1:0);
      }
      // ensure corners (finder patterns)
      function fillSquare(r,c){
        for(let y=r;y<r+3;y++) for(let x=c;x<c+3;x++) pattern[y*9+x]=1;
      }
      fillSquare(0,0); fillSquare(0,6); fillSquare(6,0);
      return pattern;
    }

    document.getElementById('btn-copy').addEventListener('click', ()=>{
      navigator.clipboard && navigator.clipboard.writeText('08123456789').then(()=>alert('Nomor pembayaran disalin: 08123456789')); 
    });

    document.getElementById('btn-confirm').addEventListener('click', ()=>{
      // for prototype, mark order as completed and clear cart
      alert('Pembayaran tercatat (simulasi). Terima kasih!'); CART={}; saveCart(); renderCart(); overlay.classList.remove('show');
    });

    // view orders stub
    document.getElementById('btn-view-orders').addEventListener('click', ()=>{
      alert('Fitur daftar pesanan (penjual) - coming soon pada versi lengkap.');
    });

    // quick save on unload
    window.addEventListener('beforeunload', saveCart);

  </script>
</body>
</html>
